<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>License Decision Matrix</title>
  <meta name="description" content="Decision matrix to determine Business (desktop) vs. Basic/Web licenses." />
  <style>
    :root{
      --bg:#0f1420;
      --card:#0b1020;
      --accent:#61affe;
      --accentSoft:#9bd1ff;
      --danger:#ff6b6b;
      --ok:#22c55e;
      --muted:#98a2b3;
      --ink:#e6edf3;
      --inkDim:#c7d2e0;
      --ring: 0 0 0 2px rgba(97,175,254,.35);
      --shadow: 0 10px 25px rgba(0,0,0,.35);
    }

    * { box-sizing: border-box; }
    html, body {
      margin:0; padding:0;
      background: radial-gradient(1200px 800px at 10% -10%, #162035, transparent 60%),
                  radial-gradient(900px 700px at 110% 10%, #102132, transparent 50%),
                  var(--bg);
      color: var(--ink);
      font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, "Segoe UI", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      min-height:100%;
    }

    header{
      display:flex; align-items:center; justify-content:center;
      padding:28px 16px;
      text-align:center;
      gap:12px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background: linear-gradient(135deg, #11b6e6, #1173f0);
      display:grid; place-items:center;
      box-shadow: var(--shadow);
    }
    .logo span{
      width:18px; height:18px; border:3px solid white; border-top: none; border-left: none; transform: rotate(45deg);
      border-radius:3px;
    }
    h1{
      font-weight:700; margin:0;
      font-size: clamp(20px, 2.6vw, 28px);
    }
    .subtle{ color: var(--muted); font-size:14px; margin-top:4px; }

    .wrap{
      width:100%;
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 16px 80px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:16px;
    }
    @media (min-width: 980px){
      .grid{ grid-template-columns: 1.2fr .8fr; }
    }

    .card{
      background: linear-gradient(180deg, rgba(13,19,42,.8), rgba(11,16,32,.9));
      border: 1px solid rgba(255,255,255,.07);
      border-radius: 14px;
      padding: 18px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(4px);
    }
    .card h2{
      margin:2px 0 14px;
      font-size:18px;
      letter-spacing:.2px;
    }

    .row{
      display:grid;
      gap:10px;
      grid-template-columns: 1fr auto;
      align-items:start;
      padding:12px 0;
      border-bottom: 1px dashed rgba(255,255,255,.08);
    }
    .row:last-child{ border-bottom: none; }

    .q{
      color: var(--ink);
    }
    .help{
      color: var(--muted);
      font-size: 12px;
      margin-top:4px;
    }

    .choices{
      display:flex;
      gap:8px;
    }
    .btn{
      appearance:none; border:1px solid rgba(255,255,255,.12);
      background: #121a2a;
      color: var(--ink);
      padding:8px 10px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600; font-size:14px;
      transition: .18s ease;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btn:focus{ outline:none; box-shadow: var(--ring); }
    .btn.on{
      background: linear-gradient(180deg, rgba(97,175,254,.22), rgba(97,175,254,.08));
      border-color: rgba(97,175,254,.6);
      color: white;
    }
    .btn.no.on{
      background: linear-gradient(180deg, rgba(255,107,107,.22), rgba(255,107,107,.08));
      border-color: rgba(255,107,107,.6);
    }

    .stack{ display:grid; gap:12px; }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      border:1px solid rgba(255,255,255,.12);
      background:#0f1627;
      color: var(--ink);
      padding:10px 12px;
      border-radius:999px;
      font-size:13px;
    }
    .k{
      width:8px; height:8px; border-radius:999px; background: var(--accent);
      box-shadow: 0 0 0 3px rgba(97,175,254,.22);
    }

    .result{
      border-radius:14px;
      padding:14px;
      background: linear-gradient(180deg, rgba(34,197,94,.15), rgba(34,197,94,.05));
      border: 1px solid rgba(34,197,94,.45);
      color: #c6f6d5;
      font-weight:600;
    }
    .result.bad{
      background: linear-gradient(180deg, rgba(255,107,107,.18), rgba(255,107,107,.06));
      border-color: rgba(255,107,107,.5);
      color: #ffd6d6;
    }

    .bar{
      height: 10px; width:100%; background: rgba(255,255,255,.08); border-radius:999px; overflow:hidden;
    }
    .bar > span{
      display:block; height:100%; width:0%; background: linear-gradient(90deg, #61affe, #22c55e);
      transition: width .25s ease;
    }

    .toolbar{
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
      margin-top:14px;
    }
    .tgroup{ display:flex; gap:10px; flex-wrap:wrap; }

    .cta{
      background: linear-gradient(180deg, #61affe, #3a8fff);
      border: none; color: white; font-weight:700;
      padding:10px 14px; border-radius:12px; cursor:pointer;
      box-shadow: var(--shadow);
    }
    .ghost{
      background: transparent; color: var(--ink);
      border:1px solid rgba(255,255,255,.18); padding:10px 12px; border-radius:12px; cursor:pointer;
    }

    footer{
      padding:24px 16px; text-align:center; color: var(--muted); font-size:13px;
    }
    code.inline{ background: rgba(255,255,255,.06); padding:2px 6px; border-radius:6px; }

    .preset{
      display:flex; gap:8px; flex-wrap:wrap;
    }
    .chip{
      border:1px solid rgba(255,255,255,.16); background:#0f172a; color: var(--ink);
      border-radius:999px; padding:8px 12px; cursor:pointer; font-size:13px; font-weight:600;
    }
    .chip.on{ border-color: rgba(97,175,254,.6); background: rgba(97,175,254,.15); }
  </style>
</head>
<body>
  <header>
    <div class="logo" aria-hidden="true"><span></span></div>
    <div>
      <h1>License Decision Matrix</h1>
      <div class="subtle">Determine when a Business (desktop) license is required vs. Basic/Web use.</div>
    </div>
  </header>

  <div class="wrap">
    <div class="grid">
      <section class="card">
        <h2>Questions</h2>

        <div class="stack" id="questions"></div>

        <div class="toolbar">
          <div class="tgroup preset" id="presets"></div>
          <div class="tgroup">
            <button class="ghost" id="resetBtn">Reset</button>
            <button class="cta" id="copyBtn">Copy summary</button>
            <button class="ghost" id="csvBtn">Download CSV</button>
          </div>
        </div>
      </section>

      <aside class="card">
        <h2>Summary</h2>

        <div class="pill" style="margin-bottom:10px;">
          <span class="k" id="kDot"></span>
          <span id="scoreText">Score: 0 / 10</span>
        </div>

        <div class="bar"><span id="barFill" style="width:0%"></span></div>

        <div id="result" class="result" style="margin-top:12px;">
          Answer the questions to see the suggested license type.
        </div>

        <div style="margin-top:12px" class="subtle">
          Tip: Blue = “Yes” increases the likelihood of a Business license. Red “No” selections decrease it.
        </div>
      </aside>
    </div>
  </div>

  <footer>
    Matrix v1.0 • Static site. No data is stored or sent. Edit the file <code class="inline">index.html</code> to customize.
  </footer>

  <script>
    // Configuration: questions and weights
    const QUESTIONS = [
      { id:'team_size', text:'Will more than one person use the app concurrently or via shared credentials?', weight:1.2, help:'Business licenses are typically needed for multi-user or team access.' },
      { id:'revenue', text:'Is the usage tied to revenue-generating work (sales, proposals, client deliverables)?', weight:1.1, help:'Commercial outputs and billable work lean toward Business licensing.' },
      { id:'distribution', text:'Will the outputs be distributed externally (clients, partners, the public)?', weight:1.0, help:'External distribution often requires broader licensing.' },
      { id:'automation', text:'Will the tool be integrated in automated workflows or internal apps?', weight:0.9, help:'Automation or embedding can require expanded rights.' },
      { id:'scale', text:'Do you expect high-volume usage (daily or scripted runs)?', weight:0.8, help:'Sustained or automated scale suggests Business usage.' },
      { id:'sensitive', text:'Will you process confidential, regulated, or personal data?', weight:0.9, help:'Business plans typically include stronger compliance options.' },
      { id:'branding', text:'Will outputs be customer-facing with your branding (web, marketing, sales)?', weight:0.8, help:'Public-facing use tends to need Business licensing.' },
      { id:'resale', text:'Are outputs resold, packaged, or included in products for customers?', weight:1.2, help:'Resale or embedding in products is a strong Business indicator.' },
      { id:'desktop', text:'Do you need native desktop features or offline use?', weight:0.6, help:'Desktop features map to Business (desktop) licenses.' },
      { id:'support', text:'Do you need SLAs, admin controls, or enterprise support?', weight:0.5, help:'Support/administration needs are part of Business offerings.' },
    ];

    const PRESETS = [
      { name:'Individual', on:['branding'], off:['team_size','automation','resale'] },
      { name:'Sales/BD', on:['revenue','distribution','branding'], off:[] },
      { name:'Marketing', on:['branding','distribution'], off:['desktop'] },
      { name:'Engineering', on:['automation','scale'], off:[] },
      { name:'Compliance', on:['sensitive','support'], off:[] },
    ];

    // State
    const state = { answers: Object.fromEntries(QUESTIONS.map(q => [q.id, null])) };

    // DOM helpers
    const el = (sel) => document.querySelector(sel);
    const c = (tag, cls) => {
      const e = document.createElement(tag);
      if (cls) e.className = cls;
      return e;
    };

    // Render questions
    function renderQuestions(){
      const host = el('#questions');
      host.innerHTML = '';
      QUESTIONS.forEach(q => {
        const row = c('div','row');

        const left = c('div');
        const title = c('div','q'); title.textContent = q.text;
        const help = c('div','help'); help.textContent = q.help;
        left.append(title, help);

        const right = c('div','choices');
        const yes = c('button','btn yes'); yes.textContent = 'Yes';
        const no  = c('button','btn no');  no.textContent  = 'No';

        yes.addEventListener('click', () => setAnswer(q.id, true, yes, no));
        no.addEventListener('click',  () => setAnswer(q.id, false, yes, no));

        right.append(yes, no);
        row.append(left, right);
        host.append(row);
      });
    }

    function setAnswer(id, val, yesBtn, noBtn){
      state.answers[id] = val;
      // toggle styles
      yesBtn.classList.toggle('on', val === true);
      noBtn.classList.toggle('on', val === false);
      updateSummary();
    }

    // Summary calc
    function updateSummary(){
      const weights = QUESTIONS.map(q => q.weight);
      const max = weights.reduce((a,b)=>a+b,0);
      let score = 0;

      QUESTIONS.forEach(q => {
        const a = state.answers[q.id];
        if (a === true) score += q.weight;
        // false adds 0; null ignored
      });

      const pct = Math.round((score / max) * 100);
      el('#barFill').style.width = pct + '%';
      el('#scoreText').textContent = `Score: ${score.toFixed(1)} / ${max.toFixed(1)} (${pct}%)`;

      const res = el('#result');
      if (pct >= 55){
        res.classList.remove('bad');
        res.innerHTML = 'Recommendation: Business (desktop) license is likely required, based on your selections.';
      } else if (pct >= 35){
        res.classList.remove('bad');
        res.innerHTML = 'Recommendation: Borderline. Review use case with your team; Business license may be appropriate.';
      } else {
        res.classList.add('bad');
        res.innerHTML = 'Recommendation: Basic/Web use likely acceptable. Confirm any external distribution or resale plans.';
      }

      // dot color hue shift
      const dot = el('#kDot');
      const hue = 120 * (pct/100); // 0..120
      dot.style.background = `hsl(${hue}, 85%, 55%)`;
      dot.style.boxShadow = `0 0 0 3px hsla(${hue}, 85%, 55%, .25)`;
    }

    // Presets
    function renderPresets(){
      const host = el('#presets');
      PRESETS.forEach(p => {
        const chip = c('button','chip');
        chip.textContent = p.name;
        chip.addEventListener('click', () => {
          // clear
          Object.keys(state.answers).forEach(k => state.answers[k] = null);
          // apply preset
          p.on.forEach(id => state.answers[id] = true);
          p.off.forEach(id => state.answers[id] = false);
          // re-render button states
          document.querySelectorAll('#questions .row').forEach((row, i) => {
            const q = QUESTIONS[i];
            const yes = row.querySelector('.yes');
            const no  = row.querySelector('.no');
            yes.classList.toggle('on', state.answers[q.id] === true);
            no.classList.toggle('on', state.answers[q.id] === false);
          });
          // visual toggle
          document.querySelectorAll('.chip').forEach(n => n.classList.remove('on'));
          chip.classList.add('on');
          updateSummary();
        });
        host.append(chip);
      });
    }

    // Actions
    el('#resetBtn')?.addEventListener('click', () => {
      Object.keys(state.answers).forEach(k => state.answers[k] = null);
      document.querySelectorAll('#questions .row').forEach(row => {
        row.querySelector('.yes').classList.remove('on');
        row.querySelector('.no').classList.remove('on');
      });
      document.querySelectorAll('.chip').forEach(n => n.classList.remove('on'));
      updateSummary();
    });

    el('#copyBtn')?.addEventListener('click', async () => {
      const txt = buildSummaryText();
      try{
        await navigator.clipboard.writeText(txt);
        flash('Summary copied to clipboard.');
      }catch{
        flash('Copy failed. Select and copy manually.');
      }
    });

    el('#csvBtn')?.addEventListener('click', () => {
      const rows = [['Question','Answer','Weight']];
      QUESTIONS.forEach(q => {
        const a = state.answers[q.id];
        rows.push([q.text, a===true?'Yes':a===false?'No':'', q.weight]);
      });
      const csv = rows.map(r => r.map(s => `"${String(s).replace(/"/g,'""')}"`).join(',')).join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'license-matrix.csv';
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });

    function buildSummaryText(){
      const weights = QUESTIONS.map(q => q.weight);
      const max = weights.reduce((a,b)=>a+b,0);
      let score = 0;
      QUESTIONS.forEach(q => { if (state.answers[q.id] === true) score += q.weight; });
      const pct = Math.round((score / max) * 100);

      const lines = [];
      lines.push('License Decision Matrix Summary');
      lines.push(`Score: ${score.toFixed(1)} / ${max.toFixed(1)} (${pct}%)`);
      lines.push('');
      QUESTIONS.forEach(q => {
        const a = state.answers[q.id];
        lines.push(`- ${q.text}: ${a===true?'Yes':a===false?'No':'(not answered)'} [w=${q.weight}]`);
      });
      lines.push('');
      if (pct >= 55){
        lines.push('Recommendation: Business (desktop) license likely required.');
      } else if (pct >= 35){
        lines.push('Recommendation: Borderline; review with your team.');
      } else {
        lines.push('Recommendation: Basic/Web use likely acceptable.');
      }
      return lines.join('\n');
    }

    function flash(msg){
      const n = document.createElement('div');
      n.textContent = msg;
      n.style.position='fixed';
      n.style.left='50%';
      n.style.top='20px';
      n.style.transform='translateX(-50%)';
      n.style.background='rgba(17,24,39,.95)';
      n.style.color='white';
      n.style.padding='10px 14px';
      n.style.border='1px solid rgba(255,255,255,.15)';
      n.style.borderRadius='10px';
      n.style.boxShadow='0 10px 25px rgba(0,0,0,.35)';
      n.style.zIndex='9999';
      document.body.appendChild(n);
      setTimeout(()=>{ n.remove(); }, 1800);
    }

    // Init
    renderQuestions();
    renderPresets();
    updateSummary();
  </script>
</body>
</html>
